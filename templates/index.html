<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Image → ASCII Art</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header>
    <h1>Image → ASCII Art Converter</h1>
    <p>One-page app. Drop or choose an image on the left; get ASCII on the right.</p>
  </header>
  <div class="container">
    <form class="grid" method="post" enctype="multipart/form-data">
      <div class="card">
        <h2>Input Image</h2>
        <label id="dropzone" class="dropzone">
          {% if img_data %}
            <img class="preview" src="data:image/{{ img_ext }};base64,{{ img_data }}" alt="preview" />
          {% else %}
            <div>
              <p style="margin:.25rem 0 0.5rem; font-size:1.05rem;">Drag & drop an image here</p>
              <p class="hint">or click to choose a file (PNG/JPG/WebP)</p>
            </div>
          {% endif %}
          <input id="file" name="image" type="file" accept="image/*" style="display:none">
        </label>

        <div class="controls">
          <label>Width (chars)
            <input type="number" min="40" max="300" step="5" name="width" value="{{ width }}">
          </label>
          <label>Charset
            <select name="ramp">
              {% for key,label in ramps %}
                <option value="{{ key }}" {% if key==ramp %}selected{% endif %}>{{ label }}</option>
              {% endfor %}
            </select>
          </label>
          <button class="btn" type="submit">Convert</button>
          {% if ascii %}
            <button class="btn secondary" type="button" id="copyBtn">Copy ASCII</button>
            <button class="btn secondary" type="button" id="downloadBtn">Download .txt</button>
          {% endif %}
        </div>
        <p class="hint">Tip: Monospaced fonts display best. Try widths 100–160.</p>
      </div>

      <div class="card">
        <h2>ASCII Output</h2>
        <textarea id="asciiBox" readonly placeholder="Your ASCII art will appear here after conversion...">{{ ascii }}</textarea>
      </div>
    </form>
  </div>
  <footer>Built with Flask + Pillow. No uploads stored.</footer>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>